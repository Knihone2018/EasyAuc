<!DOCTYPE html>
<html>
	<head>
		<title>EasyAuc</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<script src="js/jquery-3.4.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="js/bootstrap.min.js"></script>
		<!-- <link href="css/easyaunc.css" rel="stylesheet" media="screen"> -->
		<script src="js/easyaunc.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="row clearfix">
				<div class="col-md-12 column">
					<h2>
						EasyAuc
					</h2>
					<div class="row clearfix">
						<div class="col-md-4 column">
						</div>
						<div class="col-md-2 column">
						</div>
						<div class="col-md-3 column">
						</div>
						<div class="col-md-3 column">
							<br>
							<button id="home" type="button" class="btn btn-warning btn-sm">Home<span style="display: none"></span></button>
							<button id="mycart" type="button" class="btn btn-info btn-sm">My Cart<span style="display: none"></span></button>
							<button id="mywatchlist" type="button" class="btn btn-success btn-sm">My Watchlist<span style="display: none"></span></button>
						</div>
					</div>
				</div>
			</div>
			<br/>
			<div class="row clearfix">
				<div class="col-md-12 column">
					<div class="jumbotron">
						<h1>
							<span class="text-primary">H</span>
							<span class="text-secondary">e</span>
							<span class="text-success">l</span>
							<span class="text-danger">l</span>
							<span class="text-warning">o</span>
							<span class="text-info">!</span>
						</h1>
						<p>
							This is your profile page. You can manage your personal information here. Please don't tell anyone about your password.
						</p>
						<p>
							EasyAunc will help you find everything you like!
						</p>
					</div>
				</div>
			</div>
            <div class="mb-3">
				<label for="email">My Email</label>
				<input type="email" class="form-control" id="email" disabled="true">
            </div>
            <div class="mb-3">
				<label>First Name</label>
				<input class="form-control" id="firstname" disabled="true">
            </div>
            <div class="mb-3">
				<label>Last Name</label>
				<input class="form-control" id="lastname" disabled="true">
            </div>
            <div class="mb-3">
				<label>My Address</label>
				<input class="form-control" id="address" disabled="true">
            </div>
            <div class="mb-3">
				<label>Zipcode</label>
				<input class="form-control" id="zipcode" disabled="true">
            </div>
            <div class="mb-3">
				<label>City</label>
				<input class="form-control" id="city" disabled="true">
            </div>
            <div class="mb-3">
				<label>State</label>
				<input class="form-control" id="state" disabled="true">
            </div>
            <div class="mb-3">
				<label>My Bank Account</label>
				<input class="form-control" id="bankAccount" disabled="true">
            </div>
            <div class="mb-3">
				<label>Rating</label>
				<input class="form-control" id="rating" disabled="true">
            </div>
            <br>
            <button id="deleteaccount" type="button" class="btn btn-danger btn-sm">Delete This Account<span style="display: none"></span></button>
            <br>
			<br>
			<br>
			<br>
			<p class="text-center font-weight-bold text-secondary">Change Email</p>
			<div class="mb-3">
				<label for="email">New Email</label>
				<input type="email" class="form-control" id="new_email">
            </div>
            <div class="mb-3">
				<label for="email">Confrim New Email</label>
				<input type="email" class="form-control" id="con_email">
            </div>
			<div class="mb-3">
				<button id="changeemail" type="button" class="btn btn-danger btn-sm">Change Email<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change First Name</p>
			<div class="mb-3">
				<label>New First Name</label>
				<input class="form-control" id="new_firstname">
            </div>
            <div class="mb-3">
				<label>Confrim New First Name</label>
				<input class="form-control" id="con_firstname">
            </div>
			<div class="mb-3">
				<button id="changefirstname" type="button" class="btn btn-danger btn-sm">Change First Name<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change Last Name</p>
			<div class="mb-3">
				<label>New Last Name</label>
				<input class="form-control" id="new_lastname">
            </div>
            <div class="mb-3">
				<label>Confrim New Last Name</label>
				<input class="form-control" id="con_lastname">
            </div>
			<div class="mb-3">
				<button id="changelastname" type="button" class="btn btn-danger btn-sm">Change Last Name<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change Address</p>
			<div class="mb-3">
				<label>New Address</label>
				<input class="form-control" id="new_address">
            </div>
            <div class="mb-3">
				<label>Confrim New Address</label>
				<input class="form-control" id="con_address">
            </div>
			<div class="mb-3">
				<button id="changeaddress" type="button" class="btn btn-danger btn-sm">Change Address<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change Zipcode</p>
			<div class="mb-3">
				<label>New Zipcode</label>
				<input class="form-control" id="new_zipcode">
            </div>
            <div class="mb-3">
				<label>Confrim New Zipcode</label>
				<input class="form-control" id="con_zipcode">
            </div>
			<div class="mb-3">
				<button id="changezipcode" type="button" class="btn btn-danger btn-sm">Change Zipcode<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change City</p>
			<div class="mb-3">
				<label>New City</label>
				<input class="form-control" id="new_city">
            </div>
            <div class="mb-3">
				<label>Confrim New City</label>
				<input class="form-control" id="con_city">
            </div>
			<div class="mb-3">
				<button id="changecity" type="button" class="btn btn-danger btn-sm">Change City<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change State</p>
			<div class="mb-3">
				<label>New State</label>
				<input class="form-control" id="new_state">
            </div>
            <div class="mb-3">
				<label>Confrim New State</label>
				<input class="form-control" id="con_state">
            </div>
			<div class="mb-3">
				<button id="changestate" type="button" class="btn btn-danger btn-sm">Change State<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change Bank Account</p>
			<div class="mb-3">
				<label>New Bank Account</label>
				<input class="form-control" id="new_bankaccount">
            </div>
            <div class="mb-3">
				<label>Confrim New Bank Account</label>
				<input class="form-control" id="con_bankaccount">
            </div>
			<div class="mb-3">
				<button id="changebankaccount" type="button" class="btn btn-danger btn-sm">Change Bank Account<span style="display: none"></span></button>
            </div>
            <br>
            <br>
            <br>
            <p class="text-center font-weight-bold text-secondary">Change Password</p>
			<div class="mb-3">
				<label for="password">New Password</label>
				<input type="password" class="form-control" id="new_password">
            </div>
            <div class="mb-3">
				<label for="password">Confrim New Password</label>
				<input type="password" class="form-control" id="con_password">
            </div>
            <div class="mb-3">
				<button id="changepassword" type="button" class="btn btn-danger btn-sm">Change Password<span style="display: none"></span></button>
            </div>
			<br>
			<br>
		</div>
	</body>
	<footer class="footer navbar-fixed-bottom ">
		<div class="footer-copyright text-center py-3">Copyright Â© 2019 EasyAuc. All rights reserved.</div>
	</footer>
	<script type="text/javascript">
		$(function(){
			var id = getQueryVariable("id");
		    $("#home span").html(id);
		    $("#home").click(function(){
				window.location.href="home.html?id="+id;
			});
			$("#mycart span").html(id);
		    $("#mycart").click(function(){
				window.location.href="cart.html?id="+id;
			});
			$("#mywatchlist span").html(id);
		    $("#mywatchlist").click(function(){
				window.location.href="watchlist.html?id="+id;
			});
			$("#deleteaccount span").html(id);
		    $("#deleteaccount").click(function(){
		    	var url = "[Your url]"+"/deleteaccount";
		    	var data = {
		    		"userId": id
		    	};
				$.ajax({
					type: "POST",
		            dataType: "json",
		            contentType: "application/json",
		            url: url,
		            data: JSON.stringify(data),
		            success: function (response) {
		                if(response.success){
		                	alert("This account has been deleted.");
		                	window.location.href="home.html";
		                }
		            },
		            error: function () {
		                //alert("Sorry, we have some problem.");
		            }
				});
			});
			$("#changeemail span").html(id);
		    $("#changeemail").click(function(){
				change("email");
			});
			$("#changefirstname span").html(id);
		    $("#changefirstname").click(function(){
				change("firstname");
			});
			$("#changelastname span").html(id);
		    $("#changelastname").click(function(){
				change("lastname");
			});
			$("#changezipcode span").html(id);
		    $("#changezipcode").click(function(){
				change("zipcode");
			});
			$("#changecity span").html(id);
		    $("#changecity").click(function(){
				change("city");
			});
			$("#changestate span").html(id);
		    $("#changestate").click(function(){
				change("state");
			});
			$("#changebankaccount span").html(id);
		    $("#changebankaccount").click(function(){
				change("bankaccount");
			});
			$("#changepassword span").html(id);
		    $("#changepassword").click(function(){
				change("password");
			});

		    var url = "[your url]?id="+id;
			$.ajax({
				type: "GET",
	            dataType: "json",
	            url: url,
	            success: function (response) {
	                if(response.success){
	                	$("email").html(response.email);
	                	$("firstname").html(response.firstname);
	                	$("lastname").html(response.lastname);
	                	$("address").html(response.address);
	                	$("city").html(response.city);
	                	$("state").html(response.state);
	                	$("zipcode").html(response.zipcode);
	                	$("bankAccount").html(response.bankAccount);
	                	$("rating").html(response.rating);
	                }
	            },
	            error: function () {
	                //alert("Sorry, we have some problem.");
	            }
			});
		});

		function change(name){
			name = String(name);
			var id = $(this).find("span").text();
			var temp1 = $("#new_"+name).val();
			var temp2 = $("#con_"+name).val();
			if(temp1==undefined ||temp1==null||temp1==""){
				alert("New "+name+" is empty.");
				return;
			}
			if(temp2==undefined ||temp2==null||temp2==""){
				alert("Confirm "+name+" is empty.");
				return;
			}
			if(temp1!=temp2){
				alert("Two "+name+"s are different.");
				return;
			}
			var key = "";
			var url = "[Your url]";
			switch(name) {
				case "email":
			 		key = "email";
			 		url +="/setemail"; 
			    	break;
			  	case "firstname":
			    	key = "firstName";
			    	url +="/setfirstname"; 
			    	break;
			  	case "lastname":
			    	key = "lastName";
			    	break;
			    case "address":
			    	key = "address";
			    	url +="/setaddress"; 
			    	break;
			    case "zipcode":
			    	key = "zipcode";
			    	url +="/setzipcode"; 
			    	break;
			    case "city":
			    	key = "city";
			    	url +="/setCity"; 
			    	break;
			    case "state":
			    	key = "state";
			    	url +="/setstate"; 
			    	break;
			    case "bankaccount":
			    	key = "BankAccNum";
			    	url +="/setbankaccountnum";
			    	break;
			  	default:
			    // code block
			}
			var data = {key: temp1, "userId":id};
			$.ajax({
	            type: "POST",
	            dataType: "json",
	            url: url,
	            data: JSON.stringify(data),
	            contentType: "application/json",
	            success: function (response) {
	                if(response.success){
	                	alert("You've already changed your email");
	                	window.location.href="myaccount.html?id="+id;
	                }
	            },
	            error: function () {
	                //alert("Sorry, we have some problem.");
	            }
	        });
		}
	</script>
</html>