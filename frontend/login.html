<!DOCTYPE html>
<html>
    <head>
        <title>EasyAuc</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <script src="js/jquery-3.4.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="js/bootstrap.min.js"></script>
        <!-- <link href="css/easyaunc.css" rel="stylesheet" media="screen"> -->
        <script src="js/easyauc.js"></script>
    </head>
    <body>
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="d-none d-md-flex col-md-4 col-lg-6 bg-image" style="background-image: url('login.jpg');background-size: cover;background-position: center;"></div>
                <div class="col-md-8 col-lg-6">
                    <div class="login d-flex align-items-center py-5" style="min-height: 100vh;">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-9 col-lg-8 mx-auto">
                                    <h3 class="login-heading mb-4">Welcome back!</h3>
                                    
                                    <div class="form-label-group">
                                        <label for="inputEmail">Email address</label>
                                        <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
                                    </div>
                                    <br>
                                    <div class="form-label-group">
                                        <label for="inputPassword">Password</label>
                                        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
                                    </div>
                                    <br>
                                    <button id="signin" class="btn btn-lg btn-primary btn-block btn-login text-uppercase font-weight-bold mb-2" >Login</button>
                                    <button id="register" class="btn btn-lg btn-warning btn-block btn-login text-uppercase font-weight-bold mb-2">Register</button>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer class="footer navbar-fixed-bottom ">
                        <div class="footer-copyright text-center py-3">Copyright Â© 2019 EasyAuc. All rights reserved.</div>
                    </footer>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        $(function(){
            $("#signin").click(function(){
                var url = "http://127.0.0.1:8000" + "/checkpassword";
                var email = $("#inputEmail").val();
                var password = $("#inputPassword").val();
                var reg = /^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/;
                if(email==null||email==undefined||email==""){
                    alert("Email can't be empty!");
                    return;
                }
                if(!reg.test(email)){
                    alert("Wrong email!");
                    return;
                }
                if(password==null||password==undefined||password==""){
                    alert("Password can't be empty!");
                    return;
                }
                var data = {
                    "email": email,
                    "password": password
                };
                $.ajax({
                    type: "POST",
                    url: url,
                    data: JSON.stringify(data),
                    contentType: "application/json",
                    success: function (response) {
                        if(response.success){
                            console.log(response);
                            if (response.isAdmin==0)
                                window.location.href="home.html?userId="+response.userId;
                            else
                                window.location.href="admin.html?userId="+response.userId;
                        }
                    },
                    error: function () {
                        alert("Sorry, we have some problem.");
                    }
                });
            });
            $("#register").click(function(){
                window.location.href="signup.html";
            });
        });
    </script>
</html>